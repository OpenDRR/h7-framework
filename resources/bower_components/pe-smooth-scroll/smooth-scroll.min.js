!function(n){function l(e,o){this.item=n(e);var t={viewport:n("html, body"),id:null,classes:{init:"smooth-scroll",link:"smooth-scroll-link"},animation:{speed:500,ease:"swing"},offset:0,cancel:!0,complete:null,debug:!0};this.options=n.extend(!0,t,o),this.init()}l.prototype={init:function(){var l=this,e=l.item,t=l.options;t.elements;e.addClass("smooth-scroll-initialized"),n("."+t.classes.init).length?(n("."+t.classes.init).each(function(){n(this).is("a")?n(this).addClass(t.classes.link):n(this).find("a").each(function(){n(this).addClass(t.classes.link)})}),n("."+t.classes.link).each(function(){var e=!0;1==t.debug&&console.log("checking",n(this).attr("href"));var o=n(this).attr("href");null!=o&&""!=o?"#"==o.charAt(0)?1==t.debug&&console.log("href is an anchor"):(this_path=o.substring(0,o.indexOf("#")),-1!==window.location.href.indexOf(this_path)?(1==t.debug&&console.log("href contains the current URL"),o=o.substring(o.indexOf("#")),n(this).attr("href",o),console.log(n(this).attr("href"))):(1==t.debug&&console.log("href goes to another page"),e=!1,n(this).addClass("smooth-scroll-external"))):(e=!1,n(this).addClass("smooth-scroll-no-href")),1==e&&(n(o).length?1==t.debug&&console.log(o+" exists"):(1==t.debug&&console.log(o+" doesn't exist"),e=!1,n(this).addClass("smooth-scroll-no-element"))),0==e&&n(this).removeClass(t.classes.link).addClass("smooth-scroll-deactivated")}),n("."+t.classes.link).click(function(e){e.preventDefault();var o={target_id:n(this).attr("href")},t=n(this).data();for(var s in t)console.log(s,t[s]),o[s]="complete"==s?new Function(t[s]):t[s];l.scroll_to(o)})):1==t.debug&&console.log("no smooth scroll elements exist on the page"),1==t.debug&&console.log("smooth scroll","initialized")},scroll_to:function(e){this.item;var o=this.options;o.elements;"string"==typeof e&&(e={target_id:e});var t=n.extend(!0,{target_id:null,viewport:n("html, body"),speed:o.animation.speed,ease:o.animation.ease,offset:o.offset,cancel:o.cancel,complete:o.complete},e),s=n.extend(!0,t,e);if(console.log(s),n(s.target_id).length){s.viewport.offset().top,s.viewport.scrollTop();if("object"==typeof s.viewport){var l=s.viewport[s.viewport.length-1];n(l).scrollTop()}var i=n(s.target_id).offset().top-s.offset;1==o.debug&&console.log("scroll "+o.viewport+" to "+i+" so that "+s.target_id+" is in view"),!0===s.cancel&&s.viewport.on("scroll mousedown wheel DOMMouseScroll mousewheel keyup touchmove",function(){s.viewport.stop()}),o.viewport.animate({scrollTop:i},{duration:s.speed,easing:s.ease,complete:function(){s.viewport.off("scroll mousedown wheel DOMMouseScroll mousewheel keyup touchmove")}}).promise().then(function(){"function"==typeof s.complete&&s.complete.call(this)})}else 1==o.debug&&console.log("target element doesn't exist");1==o.debug&&console.log("scroll to "+s.target_id)}},n.fn.smooth_scroll=function(t){var s=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=n(this),o=e.data("smooth_scroll");o?"string"==typeof t&&o[t].apply(o,s):e.data("smooth_scroll",new l(this,t))})}}(jQuery);
